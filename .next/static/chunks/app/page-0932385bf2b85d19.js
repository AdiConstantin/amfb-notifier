(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9610:function(e,a,t){Promise.resolve().then(t.bind(t,215))},215:function(e,a,t){"use strict";t.d(a,{default:function(){return o}});var r=t(7437),n=t(2265);let l=["Raiders","Partizan","Steaua","Dinamo"];function s(e){let{value:a,onChange:t}=e,[s,o]=(0,n.useState)(""),[c,i]=(0,n.useState)(l),[d,u]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{u(!0);try{let e=await fetch("/api/teams");if(e.ok){let a=await e.json(),t=[...new Set([...l,...a.teams])].sort((e,a)=>e.localeCompare(a,"ro"));i(t)}}catch(e){console.error("Failed to fetch teams:",e)}finally{u(!1)}})()},[]);let b=(0,n.useMemo)(()=>c.filter(e=>e.toLowerCase().includes(s.toLowerCase())),[c,s]),x=e=>a.includes(e)?t(a.filter(a=>a!==e)):t([...a,e]);return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("input",{className:"w-full rounded-xl px-3 py-2 bg-neutral-900 border border-neutral-700",placeholder:"Caută echipă...",value:s,onChange:e=>o(e.target.value),disabled:d}),d&&(0,r.jsx)("p",{className:"text-xs text-neutral-400",children:"Se \xeencarcă echipele..."}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:b.map(e=>(0,r.jsx)("button",{onClick:()=>x(e),disabled:d,className:"rounded-xl px-3 py-2 border ".concat(a.includes(e)?"border-emerald-400":"border-neutral-700"," bg-neutral-800 hover:bg-neutral-700 disabled:opacity-50"),children:e},e))}),a.length>0&&(0,r.jsxs)("p",{className:"text-xs text-neutral-400",children:["Selectate: ",a.join(", ")]})]})}function o(){let[e,a]=(0,n.useState)(""),[t,l]=(0,n.useState)(""),[o,c]=(0,n.useState)(["Raiders"]),[i,d]=(0,n.useState)(""),[u,b]=(0,n.useState)(null),[x,m]=(0,n.useState)(0);async function h(){b(null);try{let t=await fetch("/api/subscribe",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:e||void 0,teams:o})}),r=await t.json();t.ok?(b(r.message||"✅ Te-ai abonat cu succes!"),a(""),c(["Raiders"])):b("❌ Eroare: ".concat(JSON.stringify(r.error)))}catch(e){b("❌ Eroare de conexiune. \xcencearcă din nou.")}}async function p(){b(null);try{let e=await fetch("/api/unsubscribe",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({id:i})}),a=await e.json();e.ok?(b("✅ Dezabonare reușită!"),d("")):b("❌ Eroare: ".concat(JSON.stringify(a.error)))}catch(e){b("❌ Eroare de conexiune. \xcencearcă din nou.")}}return(0,n.useEffect)(()=>{let e=()=>fetch("/api/stats").then(e=>e.json()).then(e=>{var a;return m(null!==(a=e.count)&&void 0!==a?a:0)}).catch(()=>{});e();let a=setInterval(e,15e3);return()=>clearInterval(a)},[]),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-neutral-900 border border-neutral-700 rounded-2xl p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Abonare notificări"}),(0,r.jsxs)("span",{className:"text-xs text-neutral-400",children:["Abonați: ",x]})]}),(0,r.jsx)("div",{className:"grid gap-4",children:(0,r.jsx)("input",{className:"rounded-xl px-3 py-2 bg-neutral-800 border border-neutral-700",placeholder:"Email",value:e,onChange:e=>a(e.target.value)})}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(s,{value:o,onChange:c})}),(0,r.jsx)("button",{onClick:h,className:"mt-4 w-full rounded-xl px-4 py-2 bg-emerald-500 hover:bg-emerald-400 text-black font-semibold",children:"Abonează-mă"})]}),(0,r.jsxs)("div",{className:"bg-neutral-900 border border-neutral-700 rounded-2xl p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Dezabonare"}),(0,r.jsx)("input",{className:"w-full rounded-xl px-3 py-2 bg-neutral-800 border border-neutral-700",placeholder:"Email",value:i,onChange:e=>d(e.target.value)}),(0,r.jsx)("button",{onClick:p,className:"mt-4 w-full rounded-xl px-4 py-2 bg-red-500 hover:bg-red-400 text-black font-semibold",children:"Dezabonează-mă"})]}),u&&(0,r.jsx)("div",{className:"p-4 rounded-xl text-sm font-medium ".concat(u.includes("✅")?"bg-emerald-900/30 border border-emerald-700 text-emerald-300":"bg-red-900/30 border border-red-700 text-red-300"),children:u})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=9610)}),_N_E=e.O()}]);